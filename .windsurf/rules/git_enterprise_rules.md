# Универсальная документация по ведению Git (Enterprise)

Документ ориентирован на большие команды и корпоративную разработку.

---

## 1. Цели и принципы

Основные цели Git-процесса в больших компаниях:
- предсказуемость
- воспроизводимость
- прозрачность истории
- безопасность основной ветки
- удобство code review

Ключевой принцип:
> **Git — это инструмент коммуникации между людьми, а не просто хранилище кода.**

---

## 2. Структура веток

### 2.1 Основные ветки

- `main` — **единственный источник правды**
  - всегда стабильна
  - всегда готова к релизу
  - protected branch

- `dev` — интеграционная ветка
  - полностью синхронизирована с `main`
  - используется для агрегации фич

---

## 3. Рабочие ветки

- `feature/*`
- `fix/*`
- `refactor/*`
- `chore/*`

Одна ветка = одна задача. Удаляется после merge.

---

## 4. Commit policy

- Коммит = атомарное логическое изменение
- Используется Conventional Commits
- Рефакторинг, форматирование и логика — разные коммиты

---

## 5. Много коммитов без шума в PR

- Делать атомарные коммиты
- Перед PR — `git rebase main`
- Не делать squash по умолчанию
- PR описывает задачу, не каждый коммит

---

## 6. Merge strategy

Рекомендуется:
- Rebase + Merge

Допустимо:
- Squash для hotfix / spike

---

## 7. Code Review

- Минимум 1–2 ревьюера
- Проверка архитектуры и влияния
- Не спорить о вкусе

---

## 8. CI/CD

- Тесты
- Линтер
- Сборка

Без зелёного CI — merge запрещён.

---

## 9. Rules для агентных IDE

- Не коммитить в `main`
- Не squash без указания
- Каждый коммит должен билдиться
- Не объединять несвязанные изменения

---

## 10. Enterprise правило

> **Чистая история важнее удобства одного разработчика,
> но удобство команды важнее идеальной истории.**
